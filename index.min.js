!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).storagens={})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var u=function e(r){var o=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t(this,e),n(this,"set",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;window[o.apiName].setItem(o._getKey(e),JSON.stringify({value:t,updateTime:Date.now(),expireTime:n}))})),n(this,"all",(function(){var e=window[o.apiName];return Object.keys(e).reduce((function(t,n){return o._hasKey(n)&&(t[o._delNamespace(n)]=JSON.parse(e[n])),t}),{})})),n(this,"allValue",(function(){var e=o.all(),t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];null!==r&&(t[o._delNamespace(n)]=r.value)}return t})),n(this,"get",(function(e){return JSON.parse(window[o.apiName].getItem(o._getKey(e)))})),n(this,"getValue",(function(e){var t=o.get(e);return null===t?null:t.value})),n(this,"has",(function(e){return!!o.get(e)})),n(this,"delete",(function(e){window[o.apiName].removeItem(o._getKey(e))})),n(this,"clear",(function(){Object.keys(o.all()).forEach((function(e){o.delete(e)}))})),n(this,"expired",(function(e){var t=o.get(e);return null===t?null:t.expireTime>0&&Date.now()>t.expireTime})),n(this,"clearExpired",(function(){var e=0,t=o.all();for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];null!==r&&r.expireTime>0&&Date.now()>r.expireTime&&(e++,o.delete(n))}return e})),n(this,"_hasKey",(function(e){var t=o.namespace?"^".concat(o.namespace,"\\."):"^".concat(e,"$");return new RegExp(t).test(e)})),n(this,"_getKey",(function(e){return o.namespace?"".concat(o.namespace,".").concat(e):"".concat(e)})),n(this,"_delNamespace",(function(e){return"".concat(e).replace("".concat(o.namespace,"."),"")})),this.apiName=r,this.namespace=i},f=function(e){r(o,e);var n=c(o);function o(e){return t(this,o),n.call(this,"localStorage",e)}return o}(u),l=function(e){r(o,e);var n=c(o);function o(e){return t(this,o),n.call(this,"sessionStorage",e)}return o}(u);e.LocalStorage=f,e.SessionStorage=l,e.default=u,Object.defineProperty(e,"__esModule",{value:!0})}));
